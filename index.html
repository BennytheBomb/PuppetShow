<!DOCTYPE html>
<html lang="en" class="h-100" data-bs-theme="auto">
<head>
    <meta charset="UTF-8"/>
    <link rel="icon" type="image/svg+xml" href="/threejs-icon.svg"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Hand Puppet Theatre</title>
    <script src="src/Main.ts" type="module"></script>
</head>
<body class="d-flex h-100 text-center text-bg-dark">
    <div class="cover-container d-flex w-100 h-100 p-3 mx-1 flex-column">
        <header class="p-3 rounded" style="background-color: #343a40;">
            <h3 class="float-md-start mb-0">Puppet Show</h3>
        </header>
        <main class="row mt-3 gy-3 mx-3">
            <div class="container px-0" style="width: 100%; max-width: 700px">
                <div id="video_container" style="position: relative; min-width: 300px; max-width: 700px; max-height: calc(100vh - 40px); width: 100%; height: auto; aspect-ratio: 1.4;">
                    <canvas id="output_canvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></canvas>
                    <video id="webcam" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; object-fit: cover" autoplay playsinline></video>
                </div>
                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 gap-3 justify-content-center align-items-center mt-3">
                    <button id="recordButton" class="btn btn-primary col-10 col-md-5 col-lg-3 order-1">
                        Record
                    </button>
                    <span id="uploadStatus" class="col-10 col-lg-3 order-4 order-lg-2">
                        Loading...
                    </span>
                    <div class="progress col-10 col-md-5 col-lg-4 order-2 order-lg-3" role="progressbar" aria-label="Basic example" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <div class="container px-0" style="width: 100%; max-width: 700px">
                <canvas id="scene" style="min-width: 300px; max-width: 700px; max-height: calc(100vh - 40px); width: 100%; height: auto; aspect-ratio: 1.4;"></canvas>
                <div class="row row-cols-2 row-cols-md-5 gap-3 justify-content-center mt-3">
                    <button id="playbackButton" class="btn btn-primary col-5 order-1">
                        Playback
                    </button>
                    <div class="p-0 col-5 order-2">
                        <input type="checkbox" class="btn-check" id="recordCheckbox" autocomplete="off">
                        <label class="btn btn-outline-secondary h-100 w-100 align-content-center px-1" for="recordCheckbox">Record Video</label>
                    </div>
                    <div class="p-0 col-5 order-3">
                        <input type="checkbox" class="btn-check" id="costumesCheckbox" checked autocomplete="off">
                        <label class="btn btn-outline-secondary h-100 w-100 align-content-center" for="costumesCheckbox">Show Costumes</label>
                    </div>
                    <div class="col-12 col-md-auto p-0 order-5 order-md-4 align-content-center">
                        <label for="pitchSlider" class="form-label mb-0">Pitch</label>
                        <input class="ms-2" type="range" min="-8" max="8" value="4" step="1" id="pitchSlider"/>
                    </div>
                    <button id="downloadVideoButton" class="btn btn-outline-primary col-5 order-4 order-md-5" disabled>
                        Download Video
                    </button>
                </div>
            </div>
        </main>
        <footer class="m-1 mt-5 mb-3 p-4 rounded text-center" style="background-color: #343a40;">
            <h3>Asset Sources</h3>
            <p class="font-monospace">
                Punch &amp; Judy Puppet Stage by Don Carson <a
                    href="https://creativecommons.org/licenses/by/3.0/">[CC-BY]</a> via <a
                    href="https://poly.pizza/m/1mDRXAZnGqC">Poly Pizza</a><br/>
                Glasses by jeremy <a href="https://creativecommons.org/licenses/by/3.0/">[CC-BY]</a> via <a
                    href="https://poly.pizza/m/9i5mmOwt7cu">Poly Pizza</a><br/>
                Top hat by jeremy <a href="https://creativecommons.org/licenses/by/3.0/">[CC-BY]</a> via <a
                    href="https://poly.pizza/m/e5kV1Y_cZJt">Poly Pizza</a><br/>
                Santa Hat by Joe Dorman <a href="https://creativecommons.org/licenses/by/3.0/">[CC-BY]</a> via <a
                    href="https://poly.pizza/m/3QKT0IHKALm">Poly Pizza</a>
            </p>
        </footer>
        <br>
    </div>
</body>
</html>
